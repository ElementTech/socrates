<p-toast></p-toast>
<p-table [value]="events" responsiveLayout="scroll"  #dt
[filterDelay]="0"
styleClass="p-datatable-sm p-datatable-gridlines"
[paginator]="true" [rows]="10" [showCurrentPageReport]="true" 
currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[5,10,25,50]"
[globalFilterFields]="['name','data.type','repeatInterval']"
>
<ng-template pTemplate="caption">
    <div class="table-header">
        <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
        </span>
    </div>
</ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Interval</th>
            <th>Last Run</th>
            <!-- <th>Run ID</th> -->
            <th>Next Run</th>
            <!-- <th>Lock</th> -->
            <th>Fail Count</th>
            <th>Fail Reason</th>
            <th>Failed At</th>
            <!-- <th>Worker</th> -->
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-event>
        <tr>
            <td>{{event.name}}</td>
            <td>{{event.data.type}}</td>
            <td>{{event.repeatInterval}}</td>
            <td>{{event.lastRunAt | date:'medium'}}</td>
            <!-- <td>{{event.data.run_id}}</td> -->
            <td>{{event.nextRunAt | date:'medium'}}</td>
            <!-- <td>{{event.lockedAt | date:'medium'}}</td> -->
            <td>{{event.failCount}}</td>
            <td>{{event.failReason}}</td>
            <td>{{event.failedAt | date:'medium'}}</td>
            <!-- <td>{{event.lastModifiedBy}}</td> -->
            <td>
                <button pButton pRipple [label]="Delete" icon="pi pi-trash" class="p-button-danger" (click)="deleteSchedule(event.name)"></button>
            </td>
        </tr>
    </ng-template>
</p-table>
